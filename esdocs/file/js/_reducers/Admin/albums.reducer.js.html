<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">js/_reducers/Admin/albums.reducer.js | album-app</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="React Album app"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="album-app"><meta property="twitter:description" content="React Album app"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-actions">_actions</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-clientActions">clientActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-utilsActions">utilsActions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-actions-admin">_actions/Admin</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-adminUiActions">adminUiActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-albumsActions">albumsActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-facesActions">facesActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-footerActions">footerActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-headerActions">headerActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-trashActions">trashActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-userActions">userActions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-actions-front">_actions/Front</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontActions">frontActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontUiActions">frontUiActions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-actions-login">_actions/Login</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-loginActions">loginActions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components">_components</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/404.jsx~Error404.html">Error404</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-PrivateRoute">PrivateRoute</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-albums-albuminfo-bar-dates">_components/Admin/Albums/AlbumInfo/Bar/Dates</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Bar/Dates/TimeAgo.jsx~TimeAgo.html">TimeAgo</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-albums-albuminfo-bar-locations-gmap">_components/Admin/Albums/AlbumInfo/Bar/Locations/Gmap</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AlbumMarker">AlbumMarker</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-albums-albuminfo-media-mediaitem">_components/Admin/Albums/AlbumInfo/Media/MediaItem</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Media/MediaItem/ProgressBar.jsx~ProgressBar.html">ProgressBar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Media/MediaItem/Status.jsx~Status.html">Status</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Media/MediaItem/Thumbnail.jsx~Thumbnail.html">Thumbnail</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Filename">Filename</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Filesize">Filesize</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-albums-albuminfo-media-partials">_components/Admin/Albums/AlbumInfo/Media/Partials</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Media/Partials/dropzone.jsx~Dropzone.html">Dropzone</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-faces-people">_components/Admin/Faces/People</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Faces/People/People.jsx~People.html">People</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-forms-fields">_components/Admin/Forms/Fields</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-textField">textField</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-partials-header-title">_components/Admin/Partials/Header/Title</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Title">Title</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-trash-albumsitem">_components/Admin/Trash/AlbumsItem</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Trash/AlbumsItem/index.jsx~AlbumsItem.html">AlbumsItem</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-users">_components/Admin/Users</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Users">Users</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-users-usercreate">_components/Admin/Users/UserCreate</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-submit">submit</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-common-form-fields">_components/Common/Form/Fields</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-renderText">renderText</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-front-album">_components/Front/Album</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Front/Album/Media.jsx~Media.html">Media</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-front-partials">_components/Front/Partials</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Spinner">Spinner</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-login">_components/Login</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-submit">submit</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-constants">_constants</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-adminConstants">adminConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-albumsConstants">albumsConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-clientConstants">clientConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contentConstants">contentConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-facesConstants">facesConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-footerConstants">footerConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontConstants">frontConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-headerConstants">headerConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-mediaConstants">mediaConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-trashConstants">trashConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-userConstants">userConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-utilsConstants">utilsConstants</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-helpers">_helpers</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-authHeader">authHeader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-drawCanvasImage">drawCanvasImage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-fitMediaToWrapper">fitMediaToWrapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mediaUploader">mediaUploader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-baseServerUrl">baseServerUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-googleKey">googleKey</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-history">history</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-store">store</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-reducers">_reducers</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-auth">auth</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-client">client</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-settings">settings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rootReducer">rootReducer</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-reducers-admin">_reducers/Admin</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-adminAlbums">adminAlbums</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-faces">faces</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-footer">footer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-header">header</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-trash">trash</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-adminUi">adminUi</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-users">users</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-reducers-front">_reducers/Front</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-frontAlbums">frontAlbums</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-frontUi">frontUi</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-services">_services</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-locationService">locationService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-utilsService">utilsService</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-services-admin">_services/Admin</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-albumsService">albumsService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-facesService">facesService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-mediaService">mediaService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-trashService">trashService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-userService">userService</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-services-front">_services/Front</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontService">frontService</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-services-login">_services/Login</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-loginService">loginService</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#translations">translations</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-adminTranslations">adminTranslations</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontTranslations">frontTranslations</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-loginTranslations">loginTranslations</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">js/_reducers/Admin/albums.reducer.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">
import { albumsConstants } from &apos;Constants&apos;

const initialState = {
  selected_album: {
    album: {},
    map: {
      edit_enabled: false
    },
    pager: {
      current_page: 0,
      cols: 1,
      rows: 1,
      per_page: 1
    }
  },
  list: {
    loading: false,
    err: false,
    items: []
  },
  dates: {
    loading: false,
    err: false,
    distinct_list: []
  }
}

export function adminAlbums(state = initialState, action) {
  switch (action.type) {

  /*
   * Album list reducers
   * calls GET_LIST_REQUEST, GET_LIST_SUCCESS, GET_LIST_FAILURE
   *       ADD_TO_LIST
   */

  case albumsConstants.GET_LIST_REQUEST:
    return {
      ...state,
      list: {
        loading: true
      }
    }
  case albumsConstants.GET_LIST_SUCCESS:
    return {
      ...state,
      list: {
        items: action.albums
      }
    }
  case albumsConstants.GET_LIST_FAILURE:
    return {
      ...state,
      list: {
        err: action.err
      }
    }
  case albumsConstants.ADD_TO_LIST:
    return {
      ...state,
      list: {
        items: [action.album, ...state.list.items]
      }
    }

  /*
   * Album list dates reducers
   * calls GET_LIST_DATES_REQUEST, GET_LIST_DATES_SUCCESS, GET_LIST_DATES_FAILURE
   */

  case albumsConstants.GET_LIST_DATES_REQUEST:
    return {
      ...state,
      dates: {
        loading: true
      }
    }
  case albumsConstants.GET_LIST_DATES_SUCCESS:
    return {
      ...state,
      dates: {
        distinct_list: action.dates
      }
    }
  case albumsConstants.GET_LIST_DATES_FAILURE:
    return {
      ...state,
      dates: {
        err: action.err
      }
    }


  /*
   * Album get one reducers
   * calls GET_ONE_REQUEST, GET_ONE_SUCCESS, GET_ONE_FAILURE
   */

  case albumsConstants.GET_ONE_REQUEST:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          loading: true
        }
      }
    }
  case albumsConstants.GET_ONE_SUCCESS:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: action.album
      }
    }
  case albumsConstants.GET_ONE_FAILURE:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          err: action.err
        }
      }
    }


  /*
   * Album data reducers
   * calls RENAME, CHANGE_DATE
   */

  case albumsConstants.RENAME:
    return {
      ...state,
      selected_album: {
        album: {
          ...state.selected_album.album,
          name: action.payload.name
        }
      },
      // Also rename album in list
      list: {
        items: state.list.items.map(album =&gt; {
          if (album.id === action.payload.album_id) {
            const { ...albumCopy } = album
            return { ...albumCopy, name: action.payload.name }
          }
          return album
        })
      }
    }
  case albumsConstants.CHANGE_DATE:
    return {
      ...state,
      selected_album: {
        album: {
          ...state.selected_album.album,
          start_date: action.payload.start_date,
          end_date: action.payload.end_date
        }
      },
      // Also change album date in list
      list: {
        items: state.list.items.map(album =&gt; {
          if (album.id === action.payload.album_id) {
            const { ...albumCopy } = album
            return {
              ...albumCopy,
              start_date: action.payload.start_date,
              end_date: action.payload.end_date
            }
          }
          return album
        })
      }
    }


  /*
   * Album locations map reducers
   * calls SET_LOCATIONS_MAP_EDIT, SET_LOCATIONS_MAP_CENTER, SET_LOCATIONS_MAP_ZOOM
   */

  case albumsConstants.SET_LOCATIONS_MAP_EDIT:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        map: {
          ...state.selected_album.map,
          edit_enabled: action.edit
        }
      }
    }
  case albumsConstants.SET_LOCATIONS_MAP_CENTER:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        map: {
          ...state.selected_album.map,
          center: action.center
        }
      }
    }
  case albumsConstants.SET_LOCATIONS_MAP_ZOOM:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        map: {
          ...state.selected_album.map,
          zoom: action.zoom
        }
      }
    }


  /*
   * Album location reducers
   * calls SET_LOCATION, REMOVE_LOCATION
   */

  case albumsConstants.SET_LOCATION:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          location: action.location
        }
      }
    }
  case albumsConstants.REMOVE_LOCATION:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          location: null
        }
      }
    }


  /*
   * Album Media reducers
   * calls SUBMIT_MEDIA, SET_MEDIA_DATA, SET_MEDIA_PHASE
   *       SET_MEDIA_MEDIA_ID
   *       REMOVE_MEDIA
   */

  case albumsConstants.SUBMIT_MEDIA:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: [
            ...state.selected_album.album.media,
            {
              id: action.id,
              phase: action.phase,
              fromServer: action.fromServer
            }
          ]
        }
      }
    }
  case albumsConstants.SET_MEDIA_DATA:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                filename: action.data.filename,
                filesize: action.data.size,
                mime: action.data.mime
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SET_MEDIA_PHASE:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                phase: action.phase
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SET_MEDIA_MEDIA_ID:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                media_id: action.media_id
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.REMOVE_MEDIA_ONE:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.filter(m =&gt; m.media_id != action.media_id)
        }
      }
    }
  case albumsConstants.CLEAR_MEDIA:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: []
        }
      }
    }

  /*
   * Album Media meta reducers
   * calls SAVE_MEDIA_METADATA_REQUEST, SAVE_MEDIA_METADATA_SUCCESS, SAVE_MEDIA_METADATA_FAILURE
   *       SAVE_MEDIA_REKOGNITION_LABELS_REQUEST, SAVE_MEDIA_REKOGNITION_LABELS_SUCCESS, SAVE_MEDIA_REKOGNITION_LABELS_FAILURE
   *       SAVE_MEDIA_REKOGNITION_TEXT_REQUEST, SAVE_MEDIA_REKOGNITION_TEXT_SUCCESS, SAVE_MEDIA_REKOGNITION_TEXT_FAILURE
   */

  case albumsConstants.SAVE_MEDIA_METADATA_REQUEST:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                metadata: { ack: &apos;loading&apos;, msg: &apos;Metadata processing...&apos; }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SAVE_MEDIA_METADATA_SUCCESS:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                metadata: { ack: &apos;ok&apos;, ...action.metadata }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SAVE_MEDIA_METADATA_FAILURE:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                metadata: { ack: &apos;err&apos;, msg: action.err }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SAVE_MEDIA_REKOGNITION_LABELS_REQUEST:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                rekognition_labels: { ack: &apos;loading&apos;, msg: &apos;Rekognition labels processing...&apos; }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SAVE_MEDIA_REKOGNITION_LABELS_SUCCESS:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                rekognition_labels: { ack: &apos;ok&apos;, ...action.rekognition_labels }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SAVE_MEDIA_REKOGNITION_LABELS_FAILURE:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                rekognition_labels: { ack: &apos;err&apos;, msg: action.err }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SAVE_MEDIA_REKOGNITION_TEXT_REQUEST:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                rekognition_text: { ack: &apos;loading&apos;, msg: &apos;Rekognition text processing...&apos; }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SAVE_MEDIA_REKOGNITION_TEXT_SUCCESS:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                rekognition_text: { ack: &apos;ok&apos;, ...action.rekognition_text }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.SAVE_MEDIA_REKOGNITION_TEXT_FAILURE:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                rekognition_text: { ack: &apos;err&apos;, msg: action.err }
              }
            }
            return m
          })
        }
      }
    }


  /*
   * Album Media image/video styles reducers
   * calls GENERATE_IMG_THUMBS_REQUEST, GENERATE_IMG_THUMBS_SUCCESS, GENERATE_IMG_THUMBS_FAILURE
   *       GENERATE_VIDEOS_REQUEST, GENERATE_VIDEOS_SUCCESS, GENERATE_VIDEOS_FAILURE
   */

  case albumsConstants.GENERATE_IMG_THUMBS_REQUEST:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                thumbs: { ack: &apos;loading&apos;, msg: &apos;Generating images thumbnails...&apos; }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.GENERATE_IMG_THUMBS_SUCCESS:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                thumbs: { ack: &apos;ok&apos; }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.GENERATE_IMG_THUMBS_FAILURE:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                thumbs: { ack: &apos;err&apos;, msg: action.err }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.GENERATE_VIDEOS_REQUEST:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                videos: { ack: &apos;loading&apos;, msg: &apos;Generating videos...&apos; }
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.GENERATE_VIDEOS_SUCCESS:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                videos: action.videos
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.GENERATE_VIDEOS_FAILURE:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.id === action.id) {
              const { ...mCopy } = m
              return {
                ...mCopy,
                videos: { ack: &apos;err&apos;, msg: action.err }
              }
            }
            return m
          })
        }
      }
    }

  /*
   * Album Media location reducers
   * calls SET_MEDIA_LOCATION, REMOVE_MEDIA_LOCATION
   *       OPEN_MEDIA_LOCATION_MARKER, CLOSE_MEDIA_LOCATION_MARKERS
   */

  case albumsConstants.SET_MEDIA_LOCATION:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.media_id === action.media_id) {
              const { ...mediaCopy } = m
              return {
                ...mediaCopy,
                location: action.location
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.REMOVE_MEDIA_LOCATION:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.media_id === action.media_id) {
              const { ...mediaCopy } = m
              return {
                ...mediaCopy,
                location: null
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.OPEN_MEDIA_LOCATION_MARKER:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            if (m.media_id === action.media_id) {
              const { ...mediaCopy } = m
              return {
                ...mediaCopy,
                marker_open: action.marker_open
              }
            }
            return m
          })
        }
      }
    }
  case albumsConstants.CLOSE_MEDIA_LOCATION_MARKERS:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          media: state.selected_album.album.media.map(m =&gt; {
            const { ...mediaCopy } = m
            return {
              ...mediaCopy,
              marker_open: false
            }
          })
        }
      }
    }

  /*
   * Album Media pager reducers
   * calls SET_MEDIA_PAGER_PAGE
   *       SET_MEDIA_PAGER_GRID
   */

  case albumsConstants.SET_MEDIA_PAGER_PAGE:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        pager: {
          ...state.selected_album.pager,
          current_page: action.page
        }
      }
    }
  case albumsConstants.SET_MEDIA_PAGER_GRID:
    return {
      ...state,
      selected_album: {
        ...state.selected_album,
        pager: {
          ...state.selected_album.pager,
          current_page: 0,
          cols: action.cols,
          rows: action.rows,
          per_page: action.cols * action.rows
        }
      }
    }



    // Unsorted reducers...




  case albumsConstants.CLEAR_SELECTED:
    return {
      ...state,
      selected_album: initialState.selected_album
    }

  // Delete album
  case albumsConstants.DELETE_REQUEST:
    return {
      ...state,
      list: {
        items:
          state.list.items.map(album =&gt;
            album.id === action.id
              ? { ...album, deleting: true }
              : album

          )
      }
    }
  case albumsConstants.DELETE_SUCCESS:
    return {
      ...state,
      list: {
        items: state.list.items.filter(album =&gt; album.id !== action.id)
      },
      selected_album: {
        ...state.selected_album,
        album: {
          ...state.selected_album.album,
          status: albumsConstants.TRASHED
        }
      }
    }
  case albumsConstants.DELETE_FAILURE:
    return {
      ...state,
      list: {
        items: state.list.items.map(album =&gt; {
          if (album.id === action.id) {
            // make copy of album without &apos;deleting:true&apos; property
            const { deleting, ...albumCopy } = album
            // return copy of album with &apos;deleteError:[error]&apos; property
            return { ...albumCopy, deleteError: action.error }
          }

          return album
        })
      }
    }

  // Default
  default:
    return state
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
