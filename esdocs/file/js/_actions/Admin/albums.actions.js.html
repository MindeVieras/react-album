<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">js/_actions/Admin/albums.actions.js | album-app</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="React Album app"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="album-app"><meta property="twitter:description" content="React Album app"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-actions">_actions</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-clientActions">clientActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-utilsActions">utilsActions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-actions-admin">_actions/Admin</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-adminUiActions">adminUiActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-albumsActions">albumsActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-facesActions">facesActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-footerActions">footerActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-headerActions">headerActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-trashActions">trashActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-userActions">userActions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-actions-front">_actions/Front</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontActions">frontActions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontUiActions">frontUiActions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-actions-login">_actions/Login</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-loginActions">loginActions</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components">_components</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/404.jsx~Error404.html">Error404</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-PrivateRoute">PrivateRoute</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-albums-albuminfo-bar-dates">_components/Admin/Albums/AlbumInfo/Bar/Dates</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Bar/Dates/TimeAgo.jsx~TimeAgo.html">TimeAgo</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-albums-albuminfo-bar-locations-gmap">_components/Admin/Albums/AlbumInfo/Bar/Locations/Gmap</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AlbumMarker">AlbumMarker</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-albums-albuminfo-media-mediaitem">_components/Admin/Albums/AlbumInfo/Media/MediaItem</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Media/MediaItem/ProgressBar.jsx~ProgressBar.html">ProgressBar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Media/MediaItem/Status.jsx~Status.html">Status</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Media/MediaItem/Thumbnail.jsx~Thumbnail.html">Thumbnail</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Filename">Filename</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Filesize">Filesize</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-albums-albuminfo-media-partials">_components/Admin/Albums/AlbumInfo/Media/Partials</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Albums/AlbumInfo/Media/Partials/dropzone.jsx~Dropzone.html">Dropzone</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-faces-people">_components/Admin/Faces/People</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Faces/People/People.jsx~People.html">People</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-forms-fields">_components/Admin/Forms/Fields</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-textField">textField</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-partials-header-title">_components/Admin/Partials/Header/Title</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Title">Title</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-trash-albumsitem">_components/Admin/Trash/AlbumsItem</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Admin/Trash/AlbumsItem/index.jsx~AlbumsItem.html">AlbumsItem</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-users">_components/Admin/Users</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Users">Users</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-admin-users-usercreate">_components/Admin/Users/UserCreate</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-submit">submit</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-common-form-fields">_components/Common/Form/Fields</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-renderText">renderText</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-front-album">_components/Front/Album</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/_components/Front/Album/Media.jsx~Media.html">Media</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-front-partials">_components/Front/Partials</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Spinner">Spinner</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-components-login">_components/Login</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-submit">submit</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-constants">_constants</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-adminConstants">adminConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-albumsConstants">albumsConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-clientConstants">clientConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contentConstants">contentConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-facesConstants">facesConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-footerConstants">footerConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontConstants">frontConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-headerConstants">headerConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-mediaConstants">mediaConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-trashConstants">trashConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-userConstants">userConstants</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-utilsConstants">utilsConstants</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-helpers">_helpers</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-authHeader">authHeader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-drawCanvasImage">drawCanvasImage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-fitMediaToWrapper">fitMediaToWrapper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mediaUploader">mediaUploader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-baseServerUrl">baseServerUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-googleKey">googleKey</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-history">history</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-store">store</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-reducers">_reducers</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-auth">auth</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-client">client</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-settings">settings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rootReducer">rootReducer</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-reducers-admin">_reducers/Admin</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-adminAlbums">adminAlbums</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-faces">faces</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-footer">footer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-header">header</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-trash">trash</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-adminUi">adminUi</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-users">users</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-reducers-front">_reducers/Front</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-frontAlbums">frontAlbums</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-frontUi">frontUi</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-services">_services</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-locationService">locationService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-utilsService">utilsService</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-services-admin">_services/Admin</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-albumsService">albumsService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-facesService">facesService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-mediaService">mediaService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-trashService">trashService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-userService">userService</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-services-front">_services/Front</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontService">frontService</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#-services-login">_services/Login</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-loginService">loginService</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#translations">translations</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-adminTranslations">adminTranslations</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-frontTranslations">frontTranslations</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-loginTranslations">loginTranslations</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">js/_actions/Admin/albums.actions.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">
import { toastr } from &apos;react-redux-toastr&apos;
import Popup from &apos;react-popup&apos;

import { albumsConstants } from &apos;Constants&apos;
import { albumsService, mediaService, trashService } from &apos;Services&apos;

export const albumsActions = {
  getList, getListDates, addToList,
  getOne,
  rename, changeDate,
  setMapEdit, setMapCenter, setMapZoom,
  setLocation, updateLocation, removeLocation,
  clearSelected,
  submitMedia, setMediaData, setMediaPhase, setMediaMediaId,
  saveMediaMetadata, saveRekognitionLabels, saveRekognitionText,
  generateImageThumbs, generateVideos,
  setMediaLocation, updateMediaLocation, removeMediaLocation,
  openMediaLocationMarker, closeMediaLocationMarkers,
  setMediaPagerPage, setMediaPagerGrid,
  moveMedia, trashMedia, deleteMedia, clearMedia,
  delete: _delete
}


/*
 * Album list actions
 * calls getList, getListDates, addToList
 */

function getList(start_date, end_date) {
  return dispatch =&gt; {
    dispatch(request())

    albumsService.getList(start_date, end_date)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(success(res.list))
        } else {
          dispatch(failure(res.msg))
        }
      })
  }

  function request() { return { type: albumsConstants.GET_LIST_REQUEST } }
  function success(albums) { return { type: albumsConstants.GET_LIST_SUCCESS, albums } }
  function failure(err) { return { type: albumsConstants.GET_LIST_FAILURE, err } }
}

function getListDates() {
  return dispatch =&gt; {
    dispatch(request())

    albumsService.getListDates()
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(success(res.dates))
        } else {
          dispatch(failure(res.msg))
        }
      })
  }

  function request() { return { type: albumsConstants.GET_LIST_DATES_REQUEST } }
  function success(dates) { return { type: albumsConstants.GET_LIST_DATES_SUCCESS, dates } }
  function failure(err) { return { type: albumsConstants.GET_LIST_DATES_FAILURE, err } }
}

function addToList(album) {
  return dispatch =&gt; {
    dispatch(add(album))
  }

  function add(album) { return { type: albumsConstants.ADD_TO_LIST, album } }
}


/*
 * Album list actions
 * calls getOne
 */

function getOne(id) {
  return dispatch =&gt; {
    dispatch(request())

    albumsService.getOne(id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(success(res.data))
        } else {
          dispatch(failure(res.msg))
        }
      })
  }

  function request() { return { type: albumsConstants.GET_ONE_REQUEST } }
  function success(album) { return { type: albumsConstants.GET_ONE_SUCCESS, album } }
  function failure(err) { return { type: albumsConstants.GET_ONE_FAILURE, err } }
}


/*
 * Album data actions
 * calls rename, changeDate
 */

function rename(payload) {
  return dispatch =&gt; {
    albumsService.rename(payload)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(rename(payload))
          toastr.success(&apos;Success&apos;, res.msg)
        } else {
          toastr.error(&apos;Error&apos;, res.msg)
        }
      })
  }

  function rename(payload) { return { type: albumsConstants.RENAME, payload } }
}

function changeDate(payload) {
  return dispatch =&gt; {
    albumsService.changeDate(payload)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(change(payload))
          Popup.close()
          toastr.success(&apos;Success&apos;, res.msg)
        } else {
          toastr.error(&apos;Error&apos;, res.msg)
        }
      })
  }

  function change(payload) { return { type: albumsConstants.CHANGE_DATE, payload } }
}


/*
 * Album locations map actions
 * calls rename, changeDate
 */

function setMapEdit(edit) {
  return dispatch =&gt; {
    dispatch(set(edit))
  }

  function set(edit) { return { type: albumsConstants.SET_LOCATIONS_MAP_EDIT, edit } }
}

function setMapCenter(center) {
  return dispatch =&gt; {
    dispatch(set(center))
  }

  function set(center) { return { type: albumsConstants.SET_LOCATIONS_MAP_CENTER, center } }
}

function setMapZoom(zoom) {
  return dispatch =&gt; {
    dispatch(set(zoom))
  }

  function set(zoom) { return { type: albumsConstants.SET_LOCATIONS_MAP_ZOOM, zoom } }
}


/*
 * Album location actions
 * calls rename, changeDate
 */

function setLocation(album_id, location) {
  return dispatch =&gt; {
    albumsService.setLocation(album_id, location)
      .then(res =&gt; {
        dispatch(set(location))
      })
  }
  function set(location) { return { type: albumsConstants.SET_LOCATION, location } }
}

function updateLocation(album_id, location) {
  return dispatch =&gt; {
    albumsService.updateLocation(album_id, location)
      .then(res =&gt; {
        dispatch(set(location))
      })
  }
  function set(location) { return { type: albumsConstants.SET_LOCATION, location } }
}

function removeLocation(id) {
  return dispatch =&gt; {
    albumsService.removeLocation(id)
      .then(res =&gt; {
        dispatch(remove(id))
      })
  }
  function remove(id) { return { type: albumsConstants.REMOVE_LOCATION, id } }
}


/*
 * Album Media actions
 * calls submitMedia, setMediaData
 *       setMediaMediaId
 *       trashMedia
 */

function submitMedia(id, phase, fromServer) {
  return dispatch =&gt; {
    dispatch(submit(id, phase, fromServer))
  }

  function submit(id, phase, fromServer) { return { type: albumsConstants.SUBMIT_MEDIA, id, phase, fromServer } }
}

function setMediaData(id, data) {
  return dispatch =&gt; {
    dispatch(set(id, data))
  }

  function set(id, data) { return { type: albumsConstants.SET_MEDIA_DATA, id, data } }
}

function setMediaPhase(id, phase) {
  return dispatch =&gt; {
    dispatch(set(id, phase))
  }

  function set(id, phase) { return { type: albumsConstants.SET_MEDIA_PHASE, id, phase } }
}

function setMediaMediaId(id, media_id) {
  return dispatch =&gt; {
    dispatch(set(id, media_id))
  }

  function set(id, media_id) { return { type: albumsConstants.SET_MEDIA_MEDIA_ID, id, media_id } }
}

function trashMedia(media_id) {
  return dispatch =&gt; {
    mediaService.putToTrash(media_id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(remove(media_id))
          toastr.success(&apos;Success&apos;, res.msg)
        } else if (res.ack == &apos;err&apos;) {
          toastr.error(&apos;Error&apos;, res.msg)
        }
      })
  }

  function remove(media_id) { return { type: albumsConstants.REMOVE_MEDIA, media_id } }
}


/*
 * Album Media meta actions
 * calls saveMediaMetadata, saveRekognitionLabels
 */

function saveMediaMetadata(id, media_id) {
  return dispatch =&gt; {
    dispatch(request(id))

    mediaService.saveMetadata(media_id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(success(id, res.metadata))
          if (res.metadata &amp;&amp; res.metadata.location) {
            let loc = {
              lat: res.metadata.location.lat,
              lng: res.metadata.location.lon
            }
            dispatch(setLocation(media_id, loc))
          }
        } else if (res.ack == &apos;err&apos;) {
          dispatch(failure(id, res.msg))
        }
      })
  }

  function request(id) { return { type: albumsConstants.SAVE_MEDIA_METADATA_REQUEST, id } }
  function success(id, metadata) { return { type: albumsConstants.SAVE_MEDIA_METADATA_SUCCESS, id, metadata } }
  function failure(id, err) { return { type: albumsConstants.SAVE_MEDIA_METADATA_FAILURE, id, err } }
  function setLocation(media_id, location) { return { type: albumsConstants.SET_MEDIA_LOCATION, media_id, location } }
}

function saveRekognitionLabels(id, media_id) {
  return dispatch =&gt; {
    dispatch(request(id))

    mediaService.saveRekognitionLabels(media_id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(success(id, res.rekognition_labels))
        } else if (res.ack == &apos;err&apos;) {
          dispatch(failure(id, res.msg))
        }
      })
  }

  function request(id) {
    return {
      type: albumsConstants.SAVE_MEDIA_REKOGNITION_LABELS_REQUEST, id
    }
  }
  function success(id, rekognition_labels) {
    return {
      type: albumsConstants.SAVE_MEDIA_REKOGNITION_LABELS_SUCCESS, id, rekognition_labels
    }
  }
  function failure(id, err) {
    return {
      type: albumsConstants.SAVE_MEDIA_REKOGNITION_LABELS_FAILURE, id, err
    }
  }
}

function saveRekognitionText(id, media_id) {
  return dispatch =&gt; {
    dispatch(request(id))

    mediaService.saveRekognitionText(media_id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(success(id, res.rekognition_text))
        } else if (res.ack == &apos;err&apos;) {
          dispatch(failure(id, res.msg))
        }
      })
  }

  function request(id) {
    return {
      type: albumsConstants.SAVE_MEDIA_REKOGNITION_TEXT_REQUEST, id
    }
  }
  function success(id, rekognition_text) {
    return {
      type: albumsConstants.SAVE_MEDIA_REKOGNITION_TEXT_SUCCESS, id, rekognition_text
    }
  }
  function failure(id, err) {
    return {
      type: albumsConstants.SAVE_MEDIA_REKOGNITION_TEXT_FAILURE, id, err
    }
  }
}



/*
 * Album Media image/video styles actions
 * calls generateImageThumbs, generateVideos
 */

function generateImageThumbs(id, media_id) {
  return dispatch =&gt; {
    dispatch(request(id))

    mediaService.generateImageThumbs(media_id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(success(id, res.thumbs))
        } else if (res.ack == &apos;err&apos;) {
          dispatch(failure(id, res.msg))
        }
      })
  }

  function request(id) { return { type: albumsConstants.GENERATE_IMG_THUMBS_REQUEST, id } }
  function success(id, thumbs) { return { type: albumsConstants.GENERATE_IMG_THUMBS_SUCCESS, id, thumbs } }
  function failure(id, err) { return { type: albumsConstants.GENERATE_IMG_THUMBS_FAILURE, id, err } }
}

function generateVideos(id, media_id) {
  return dispatch =&gt; {
    dispatch(request(id))

    mediaService.generateVideos(media_id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(success(id, res.videos))
        } else if (res.ack == &apos;err&apos;) {
          dispatch(failure(id, res.msg))
        }
      })
  }

  function request(id) { return { type: albumsConstants.GENERATE_VIDEOS_REQUEST, id } }
  function success(id, videos) { return { type: albumsConstants.GENERATE_VIDEOS_SUCCESS, id, videos } }
  function failure(id, err) { return { type: albumsConstants.GENERATE_VIDEOS_FAILURE, id, err } }
}


/*
 * Album Media location actions
 * calls setMediaLocation, updateMediaLocation, removeMediaLocation
 *       openMediaLocationMarker, closeMediaLocationMarkers
 */

function setMediaLocation(media_id, location) {
  return dispatch =&gt; {
    mediaService.setLocation(media_id, location)
      .then(res =&gt; {
        dispatch(set(media_id, location))
      })
  }
  function set(media_id, location) { return { type: albumsConstants.SET_MEDIA_LOCATION, media_id, location } }
}

function updateMediaLocation(media_id, location) {
  return dispatch =&gt; {
    mediaService.updateLocation(media_id, location)
      .then(res =&gt; {
        dispatch(set(media_id, location))
      })
  }
  function set(media_id, location) { return { type: albumsConstants.SET_MEDIA_LOCATION, media_id, location } }
}

function removeMediaLocation(media_id) {
  return dispatch =&gt; {
    mediaService.removeLocation(media_id)
      .then(res =&gt; {
        dispatch(remove(media_id))
      })
  }
  function remove(media_id) { return { type: albumsConstants.REMOVE_MEDIA_LOCATION, media_id } }
}

function openMediaLocationMarker(media_id, marker_open) {
  return dispatch =&gt; {
    dispatch(open(media_id, marker_open))
  }

  function open(media_id, marker_open) {
    return {
      type: albumsConstants.OPEN_MEDIA_LOCATION_MARKER, media_id, marker_open
    }
  }
}

function closeMediaLocationMarkers() {
  return dispatch =&gt; {
    dispatch(close())
  }

  function close() { return { type: albumsConstants.CLOSE_MEDIA_LOCATION_MARKERS } }
}


/*
 * Album Media pager actions
 * calls setMediaPagerPage
 *       setMediaPagerGrid
 */

function setMediaPagerPage(page) {
  return dispatch =&gt; {
    dispatch(set(page))
  }

  function set(page) { return { type: albumsConstants.SET_MEDIA_PAGER_PAGE, page } }
}

function setMediaPagerGrid(cols, rows) {
  return dispatch =&gt; {
    dispatch(set(cols, rows))
  }

  function set(cols, rows) { return { type: albumsConstants.SET_MEDIA_PAGER_GRID, cols, rows } }
}







function clearSelected() {
  return dispatch =&gt; {
    dispatch(clear())
  }

  function clear() { return { type: albumsConstants.CLEAR_SELECTED } }
}


function moveMedia(media_id, album_id) {
  return dispatch =&gt; {
    mediaService.moveMedia(media_id, album_id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(remove(media_id, album_id))
          Popup.close()
          toastr.success(&apos;Success&apos;, res.msg)
        } else {
          toastr.error(&apos;Error&apos;, res.msg)
        }
      })
  }
  function remove(media_id) { return { type: albumsConstants.REMOVE_MEDIA_ONE, media_id } }
}

function trashMedia(media_id) {
  return dispatch =&gt; {
    mediaService.putToTrash(media_id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(remove(media_id))
          toastr.success(&apos;Success&apos;, res.msg)
        } else if (res.ack == &apos;err&apos;) {
          toastr.error(&apos;Error&apos;, res.msg)
        }
      })
  }

  function remove(media_id) { return { type: albumsConstants.REMOVE_MEDIA_ONE, media_id } }
}

function deleteMedia(media_id) {
  return dispatch =&gt; {
    trashService.delete(media_id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(remove(media_id))
          toastr.success(&apos;Success&apos;, res.msg)
        } else {
          toastr.error(&apos;Error&apos;, res.msg)
        }
      })
  }

  function remove(media_id) { return { type: albumsConstants.REMOVE_MEDIA_ONE, media_id } }
}

function clearMedia() {
  return dispatch =&gt; {
    dispatch(clear())
  }

  function clear() { return { type: albumsConstants.CLEAR_MEDIA } }
}

// prefixed function name with underscore because delete is a reserved word in javascript
function _delete(id) {
  return dispatch =&gt; {
    dispatch(request(id))

    albumsService.delete(id)
      .then(res =&gt; {
        if (res.ack == &apos;ok&apos;) {
          dispatch(success(id))
          toastr.success(&apos;Success&apos;, res.msg)
        } else {
          dispatch(failure(id, res.msg))
          toastr.error(&apos;Error&apos;, res.msg)
        }
      })
  }

  function request(id) { return { type: albumsConstants.DELETE_REQUEST, id } }
  function success(id) { return { type: albumsConstants.DELETE_SUCCESS, id } }
  function failure(id, err) { return { type: albumsConstants.DELETE_FAILURE, id, err } }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
